<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.myproject.mappers.questionMapper">
	<!-- 등록 -->
    <insert  id="questionInsert">
        INSERT INTO question (member_code, question_title, question_content) 
        VALUES (#{member_code}, #{question_title}, #{question_content})
    </insert >
    
    <!-- 수정 -->
    <update id="questionUpdate">
        UPDATE question 
        SET question_title = #{question_title}, question_content = #{question_content} 
        WHERE question_num = #{question_num}
    </update>    
    
    <!-- 삭제 -->
    <delete id="questionDelete">
    	delete from board where board_num = #{board_num}
    </delete>

	<!-- 관리자 리스트 -->
	<select id="questionAllList" resultType="questionVO" parameterType="String">
		select * 
		from 
			(select q.question_num, q.member_code, q.question_title, q.question_content, q.question_date, c.member_name, c.member_id 
		    from question as q, member as c 
		    where q.member_code = c.member_code) as qc 
		left join member as c 
		on c.question_num = qc.question_num order by qc.question_date desc		
	</select>
	
	<!-- 리스트 -->
	<select id="questionList" resultType="questionVO" parameterType="String">
		select * from question, member
		where member.member_code = question.member_code and member.member_code = #{member_code} order by question.question_date desc;				
	</select>
	
	<!-- 상세보기 -->
    <select id="questionView" resultType="questionVO">
        select * 
		from 
			(select q.question_num, q.member_code, q.question_title, q.question_content, q.question_date, c.member_name, c.member_id 
		    from question as q, member as c 
		    where q.member_code = c.member_code) as qc 
				left join member as c 
				on c.question_num = qc.question_num
				where qc.question_num = #{question_num}
    </select>
    
    
</mapper>