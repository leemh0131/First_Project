<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.myproject.mappers.questionMapper">
	<!-- 등록 -->
    <insert  id="questionInsert">
        INSERT INTO question (question_title, question_content) 
        VALUES (#{question_title}, #{question_content})
    </insert >
    
    <!-- 수정 -->
    <update id="questionUpdate">
        UPDATE question 
        SET question_title = #{question_title}, question_content = #{question_content} 
        WHERE question_num = #{question_num}
    </update>    
    
    <!-- 삭제 -->
    <delete id="questionDelete">
    	delete from board where board_num = #{board_num}
    </delete>

	<!-- 관리자 리스트 -->
	<select id="questionAllList" resultType="questionVO" parameterType="String">
		select *
		from question as q, customers as c 
		where q.member_code = c.member_code order by q.question_date desc		
	</select>
	
	<!-- 리스트 -->
	<select id="questionList" resultType="questionVO" parameterType="String">
		 select q.question_num, c.member_code, c.member_name, q.question_title, q.question_content, q.question_date 
		 from question as q, customers as c 
		 where c.member_code = #{member_code} and q.member_code = c.member_code order by q.question_date desc				
	</select>
	
	<!-- 상세보기 -->
    <select id="questionView" resultType="questionVO">
        select *
		from question as q, customers as c, comment as a 
		where q.question_num = #{question_num}
    </select>
    
    <!-- comment -->
    
    <!-- 답변등록 -->
    <insert  id="commentInsert">
        INSERT INTO comment (question_num, comment_title, comment_content) 
        VALUES (#{question_num}, #{comment_title}, #{comment_content})
    </insert >
    
    <!-- 답변수정 -->
    <update id="commentUpdate">
        UPDATE comment 
        SET comment_title = #{comment_title}, comment_content = #{comment_content} 
        WHERE comment_num = #{comment_num}
    </update>    
    
    <!-- 답변삭제 -->
    <delete id="commentDelete">
    	delete from comment where comment_num = #{comment_num}
    </delete>
    
    
	
	
    
</mapper>